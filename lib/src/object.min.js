module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";function r(e=0){return(()=>{let t=0;return()=>e+t++})()}n.r(t),n.d(t,"idGetter",function(){return r}),n.d(t,"BROWSERS",function(){return s}),n.d(t,"browser",function(){return i}),n.d(t,"printErr",function(){return o}),n.d(t,"isType",function(){return a}),n.d(t,"strParse",function(){return c}),n.d(t,"intParse",function(){return u}),n.d(t,"floatParse",function(){return h}),n.d(t,"jsonParse",function(){return f}),n.d(t,"construct",function(){return d}),n.d(t,"publish",function(){return m}),n.d(t,"getElementData",function(){return p}),n.d(t,"fetchSettings",function(){return y}),n.d(t,"randi",function(){return g}),n.d(t,"randf",function(){return b}),n.d(t,"randKey",function(){return _}),n.d(t,"camelCaseToDash",function(){return v}),n.d(t,"dashToCamelCase",function(){return A}),n.d(t,"camelCaseMerge",function(){return w}),n.d(t,"trim",function(){return O}),n.d(t,"capitalize",function(){return j}),n.d(t,"zeroPad",function(){return E}),n.d(t,"vmin",function(){return x}),n.d(t,"vmax",function(){return $}),n.d(t,"vw",function(){return M}),n.d(t,"vh",function(){return k}),n.d(t,"clamp",function(){return T}),n.d(t,"clampOut",function(){return S}),n.d(t,"clampSide",function(){return C}),n.d(t,"clampAngle",function(){return L}),n.d(t,"mirrAngle",function(){return N}),n.d(t,"roundBetween",function(){return R}),n.d(t,"clampBySteps",function(){return P}),n.d(t,"limitCalls",function(){return F}),n.d(t,"sleep",function(){return H}),n.d(t,"entry",function(){return D}),n.d(t,"log",function(){return I});const s={UNKNOWN:0,CHROME:1,FIREFOX:2,OPERA:3,SAFARI:4,IE:5};const i=function(){const e=navigator.userAgent;return e.search(/Chrome/)>0?s.CHROME:e.search(/Firefox/)>0?s.FIREFOX:e.search(/Opera/)>0?s.OPERA:e.search(/Safari/)>0?s.SAFARI:e.search(/MSIE|\.NET/)>0?s.IE:s.UNKNOWN}();function o(e,t=!0){let n="Error: ";if(t&&(t=l()),Array.isArray(e)&&e.length)n+=e.title||"Error list",n+="\n",e.forEach(e=>n+=`  --\x3e ${e}\n`),t&&(n+=`  -----\n  Source: ${t}`);else{if("string"!=typeof e)return!1;n+=e,t&&(n+=` (${t})`)}return console.error(n),!1}function l(){let e=(new Error).stack;if(!e)return"";e=e.split("\n");for(let t=0;t<e.length;t++)if(-1==e[t].search(/dew\.(min|dev)\.js|anonymous/g)){const n=e[t].match(/https?:[^\)]+/g);if(n&&n[0])return n[0]}return""}function a(e,t){if(Array.isArray(t))return t.some(t=>a(e,t));if(void 0===t)return"number"==typeof e?"number":"string"==typeof e?"string":"boolean"==typeof e?"boolean":Array.isArray(e)?"array":"function"==typeof e?"function":e instanceof Element?"DOM":e.isHTMLTools?"HTMLTools":"object";switch(t){case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"array":return Array.isArray(e);case"function":return"function"==typeof e;case"DOM":return e instanceof Element;case"HTMLTools":return!!e.isHTMLTools;default:return o(`the type "${t}" is unknown!`),!1}}function c(e){if("string"==typeof e)return+e?+e:"true"==e||"TRUE"==e||"false"!=e&&"FALSE"!=e&&(-1!=e.search(/\[.+\]/g)?(e=e.replace(/\[|\]/g,"").split(",")).map(e=>c(e)):-1!=e.search(/\{.+\}/gm)?f(e):O(e));o('strParse error - type of argument must be "string"')}function u(e){return+e.replace(/[^\d]/g,"")}function h(e){return parseFloat(e.replace(/,/,".").replace(/[^\d.,]/g,""))}function f(e){const t=/^[\s*"']+|['"\s*]+$/gm;let n="",r="",s=!1,i=!1,o="";for(let l=0;l<e.length;l++)s&&e[l]==n&&(s=!1,l++),"'"!=e[l]&&'"'!=e[l]||(s=!0,n=e[l],l++),i=":"==e[l],-1=="{}[],:".indexOf(e[l])||s?r+=e[l]:((r=r.replace(t,""))&&("true"==r?r=!0:"false"==r&&(r=!1),o+="boolean"==typeof r&&!i||+r&&!i?r:'"'+r+'"'),o+=e[l],r="");return JSON.parse(o)}function d(e,t){return(t=Array.from(t)).unshift(0),new(Function.bind.apply(e,t))}function m(e,t,n){const s={},i=r(e.name+"__");function o(){const t=i();s[t]=new e(...arguments),this.id=t}if(!t||!t.length)throw new Error(`The class "${e.name}" must have at least one public method`);return t.forEach(t=>{t in e.prototype?o.prototype[t]=function(){const e=s[this.id];return e[t].apply(e,arguments)}:console.error(`${e.name} class have not the "${t}" method!`)}),n&&n.forEach(e=>{Object.defineProperty(o.prototype,e,{configurable:!1,get:function(){return s[this.id][e]},set:function(t){s[this.id][e]=t}})}),o}function p(e,t,n,r){const s={};for(let i in t)if(void 0===e[i]){let e,o="data-"+(r[i]||v(i));e=+(o=n?n.getAttribute(o):null),""===o||"true"===o?o=!0:"false"===o?o=!1:null===o||isNaN(e)||(o=e),s[i]=null!==o?o:t[i]}else s[i]=e[i];return s}function y(e,t,n={},r={}){const s={};for(let i in t){const o=e[i],l=n[i],c=r[i],u=t[i];let h=!0;void 0===o?h=!1:(l&&(h=a(o,l)),c&&(h=c.indexOf(o)>=0)),s[i]=h?o:u}return s}function g(e=0,t=9999999){return Math.floor(Math.random()*(t-e))+e}function b(e=0,t=1,n){const r=Math.random()*(t-e)+e;return n?parseFloat(r.toFixed(n)):r}function _(e=15,t=["all"]){const n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="!?@#$%^&*()*-_+=[]{}<>.,;:/'\"\\";let i="";-1!=t.indexOf("all")?i=n+r+"1234567890"+s:(-1!=t.indexOf("lower")&&(i+=n),-1!=t.indexOf("upper")&&(i+=r),-1!=t.indexOf("numbers")&&(i+="1234567890"),-1!=t.indexOf("specials")&&(i+=s));const o=i.length-1;let l="";for(let t=1;t<e;t++){let e=i[random(0,o)];e!=l[t-1]&&(l+=e)}return l}function v(e){return e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function A(e){return e.replace(/-\w/g,e=>e.toUpperCase().slice(1))}function w(...e){return e.reduce((e,t,n)=>e+(n?t.charAt(0).toUpperCase()+t.slice(1):t),"")}function O(e,t){return t?e.trim().replace(/\s+/g," "):e.trim()}function j(e,t){if(t)return O(e,!0).replace().split(" ").map(e=>j(e)).join(" ");let n=O(e);return n.charAt(0).toUpperCase()+n.slice(1)}function E(e,t){let n=e+"";for(;n.length<t;)n="0"+n;return n}function x(e){return e/100*Math.min(window.innerWidth,window.innerHeight)}function $(e){return e/100*Math.max(window.innerWidth,window.innerHeight)}function M(e){return e/100*window.innerWidth}function k(e){return e/100*window.innerHeight}function T(e,t,n){return e<t?t:e>n?n:e}function S(e,t,n){let r=e;if(Number.isFinite(t)||Number.isFinite(n)){const s=t+(n-t)/2;e>=s&&e<n?r=n:e<s&&e>t&&(r=t)}return r}function C(e,t,n){const r=n?-1:1;return r*e>r*t?t:e}function L(e,t){if(!Number.isFinite(e))return e;const n=t?360:2*Math.PI,r=e%n;return r<0?n+r:r}function N(e,t){if(!Number.isFinite(e))return e;const n=t?360:2*Math.PI,r=e%n,s=r<0?n+r:r;return s>n/2?s-n:s}function R(e,t,n){return e>t+(n-t)/2?n:t}function P(e,t){if(t.length<2)return e;const n=t[t.length-1],r=t[0];let s=t[0];for(let n=1;n<t.length;n++){const r=t[n];if(!(r<s)){if(e>=s&&e<=r)return R(e,s,r);s=t[n]}}return R(e,r,n)}function F(e,t=1){let n=0;const r=(...r)=>{n<t&&(e(...r),n++)};return r.resetCalls=(()=>{n=0}),r.getSource=(()=>e),r}function H(e){return e?new Promise(t=>setTimeout(t,e)):Promise.resolve()}function D(e,t,n){return e>=t&&e<=n}function I(){const e=Array.from(arguments),t=l();t&&e.push(`\n-----\nSource: ${t}`),console.log.apply(null,e)}I.json=((e,t=4)=>I(JSON.stringify(e,null,t))),I.time=(e=>console.time(e)),I.timeEnd=(e=>console.timeEnd(e))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0);class s{constructor(e){this._handlers=new Map,"function"==typeof e&&this.push(e)}get isCallBacker(){return!0}get length(){return this._handlers.size}async(...e){return e.length>1?e:e[0]}call(...e){return this._handlers.forEach(t=>t(...e)),e.length>1?e:e[0]}sequence(...e){return this._handlers.forEach(t=>{e=Array.isArray(e)?t(...e):t(e)}),e}filter(e,...t){let n=0;for(const r of this._handlers){const s=Array.isArray(t)?r[1](...t):r[1](t);if(!(Array.isArray(s)?e(n,...s):e(n,s)))break;t=s,n++}return t}single(e,...t){const n=this._handlers.get(e);if(n)return n(...t);Object(r.printErr)(`CallBacker error: undefined handler with key "${e}"`)}push(e){if("function"==typeof e){const t=e.name||e;this._handlers.set(t,e),this._lastKey=t}}remove(e){this._handlers.has(e)&&this._handlers.delete(e)}clear(){this._handlers.clear()}pop(){this._handlers.delete(this._lastKey)}shift(){const e=this._handlers.keys().next().value;e&&this._handlers.delete(e)}}},function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(3);class i{constructor(e){this._object=e,this.errors=[],this.errors.title=`DEW object init error at ${e.constructor.name} constructor`}checkout(e,t,n){const r=this._validate(e,t,n);void 0!==r&&this._setValue(e,t,r)}_setValue(e,t,n){const{root:r,desc:s}=t,{write:i,enumer:o,config:l}=s,a=r||this._object;t.desc?Object.defineProperty(a,String(e),{writable:"boolean"!=typeof i||i,enumerable:"boolean"!=typeof o||o,configurable:"boolean"!=typeof l||l,value:n}):a[e]=n}_validate(e,t,n){const{required:s,def:i,type:o,filter:l,range:a,attr:c}=t;let u=n;return c&&(u=this._fetchFromAttribute(e,t,n)),void 0===n?s?this.errors.push(`empty required option "${e}"`):i&&(n=i):(o&&!Object(r.isType)(n,o)&&(this.errors.push(`value of "${e}" option must be a "${o}" type`),n=void 0),"function"==typeof l&&(n=l(n))),n}_fetchFromAttribute(e,t,n){const{element:i,prefix:o="data-",attrOnly:l}=t;if(!i)return void this.errors.push(`field "${e}" must have element option`);const a=s.a.convert(i).getAttr(o+e);return l&&!a?void this.errors.push(`empty required attribute of field "${e}"`):void 0===n&&a?Object(r.strParse)(a):n}}function o(e,t){return e.constructor!=Object?Object.assign(new e.constructor,e):function e(t,n){function r(){for(let r in t)t.hasOwnProperty(r)&&(this[r]=n?e(t[r],!0):t[r])}return Array.isArray(t)?t.slice():"object"==typeof t?(r.prototype="__proto__"in t?t.__proto__:Object.getPrototypeOf(t),r.constructor=t.constructor,new r):t}(e,t)}function l(e,t){for(const n of t)if(e in n)return n}function a(e,t,n){const r=n?Object.assign({},e):e;if(Array.isArray(t)){for(const e in r){const n=l(e,t);void 0!==n&&(r[e]=n)}return r}for(const e in r)e in t&&(r[e]=t[e]);return r}function c(e,t,n){const r=n?Object.assign({},e):e;if(Array.isArray(t))return t.forEach(e=>c(r,e)),r;for(const e in t)e in r||(r[e]=t[e]);return r}function u(e,t){for(const n in from){const r=Object.getOwnPropertyDescriptor(t,n);r?Object.defineProperty(e,n,r):e[n]=t[n]}return e}function h(e,t,n){const r=n?u({},e):e;return Array.isArray(t)?(t.forEach(e=>u(r,e)),r):u(r,t)}function f(e,t,n,s={errors:!0}){if(!t||!n)return Object(r.printErr)("DEW object.init error - missing required arguments (values or settings)"),!1;const o=new i(e);for(let e in n)"object"!=typeof n[e]?(s.def=n[e],o.checkout(e,s,t[e])):o.checkout(e,n[e],t[e]);return!o.errors.length||(s.errors&&Object(r.printErr)(o.errors),!1)}function d(e,t,n={}){const{enumer:r,config:s,write:i,get:o,set:l,value:a}=n;let c={enumerable:"boolean"==typeof r&&r,configurable:"boolean"!=typeof s||s,writable:"boolean"!=typeof i||i};if("string"==typeof t)void 0!==a?c.value=a:"function"==typeof o&&"function"==typeof l&&(c.get=o,c.set=l,delete c.writable),Object.defineProperty(e,t,c),"function"==typeof l&&void 0!==a&&(e[t]=a);else for(let n in t)c.value=t[n],Object.defineProperty(e,String(n),c)}n.d(t,"clone",function(){return o}),n.d(t,"innerAssign",function(){return a}),n.d(t,"outerAssign",function(){return c}),n.d(t,"fullAssign",function(){return h}),n.d(t,"init",function(){return f}),n.d(t,"define",function(){return d})},function(e,t,n){"use strict";var r=n(0),s=n(1);class i{constructor(e){this.htl=null,this.nodes={},this._struct={},this._createDOM(e,this._struct)}_createDOM(e,t){e.tag||(e.tag="div");const n=document.createElement(e.tag);t.element=n,this.htl?e.key&&(this.nodes[e.key]=new c(n),t.key=e.key):this.htl=new c(n);for(let r in e)switch(r){case"text":n.innerText=e.text;break;case"html":n.innerHTML=e.html;break;case"value":n.value=e.value;break;case"checked":n.checked=e.checked;break;case"type":n.type=e.type;break;case"name":n.name=e.name;break;case"attrs":for(let t in e.attrs)n.setAttribute(t,e.attrs[t]);break;case"styles":for(let t in e.styles)n.style[t]=e.styles[t];break;case"events":const i=l(),o=new Map;a.set(i,o);for(let t in e.events){const r=new s.a(n=>{e.events[t](n,this.nodes[e.key],this.htl)});o.set(t,r),n.setAttribute(`on${t}`,`$event.fire('${i}','${t}',event)`)}break;case"nodes":t.nodes=[],Array.isArray(e.nodes)||(e.nodes=[e.nodes]);for(let n=0;n<e.nodes.length;n++)this._createDOM(e.nodes[n],t.nodes[n]={})}}build(e=this._struct){const t=e.element.cloneNode(!0);if(e.nodes){const n=document.createDocumentFragment();for(let t=0;t<e.nodes.length;t++){const r=e.nodes[t],s=this.build(r);r.key&&this.nodes[r.key].join(s),n.appendChild(s)}t.appendChild(n)}return t}static createJSON(){if(1!==element.nodeType)return!1;const e={tag:element.tagName.toLowerCase()},t=element.attributes,n=element.childNodes;if(t.length){e.attrs={};for(let n=0;n<t.length;n++){const r=t[n];if("tag"!==r&&"nodes"!==r&&"text"!==r){const t=r.name.replace("-","_");e.attrs[t]=r.value}}}if(n.length){e.nodes=[];for(let t=0;t<n.length;t++)1==n[t].nodeType?e.nodes.push(this.createJSON(n[t])):3==n[t].nodeType&&(e.text=n[t].textContent)}return e}}var o={apply(e,t,n={}){const{origin:r,backface:s,style:i,perspective:o,units:l={}}=n;let a="";if(Array.isArray(r)){const t=l.origin||"%";e.style("transform-origin",r.join(t+" ")+t)}if(!1===s&&e.style("backface-visibility","hidden"),"3d"===i?e.style("transform-style","preserve-3d"):"flat"===i&&e.style("transform-style","flat"),"number"==typeof o){a+=`perspective(${o+(l.perspective||"px")}) `}e.style("transform",a+this.serialize(t))},serialize(e){return Array.isArray(e)?e.reduce((e,t)=>e=this._build(t)+e,""):this._build(e)},_build(e){let t="";const n=e.units||{},{matrix2d:r,matrix3d:s}=e,i=n.translate||"px",o=n.rotate||"deg",l=n.skew||"deg";if(Array.isArray(r)&&9==r.length)t+=`matrix2d(${r.join(",")}) `;else if(Array.isArray(s)&&16==s.length)t+=`matrix3d(${s.join(",")}) `;else{const{scale:n,scaleX:r,scaleY:s,skew:a,rotate:c,translate:u}=e;"number"==typeof u?t+=`translate(${u+i}) `:Array.isArray(u)&&(t+=`translate(${u.join(i+",")+i}) `),"number"==typeof c?t+=`rotate(${c+o}) `:Array.isArray(c)&&(t+=`rotate(${c.join(o+",")+o}) `),"number"==typeof a?t+=`skew(${a+l}) `:Array.isArray(a)&&(t+=`skew(${a.join(l+",")+l}) `),"number"==typeof n?t+=`scale(${n}) `:Array.isArray(n)?t+=`scale(${n.join(",")}) `:"number"==typeof r?t+=`scaleX(${r}) `:"number"==typeof s&&(t+=`scaleY(${s}) `)}return t},origin(e,t,n="%"){Array.isArray(t)&&e.style("transform-origin",t.join(n+" ")+n)},matrix2d(e,t,n){this._applyMatrix(e,t,9,n)},matrix3d(e,t,n){this._applyMatrix(e,t,16,n)},scale(e,t,n){this._applySingle(e,"scale",t,n,"")},scaleX(e,t,n){for(let r=0;r<e.length;r++){let s=n?e[r].style.transform:"";e[r].style.transform=s+` scaleX(${t})`}},scaleY(e,t,n){for(let r=0;r<e.length;r++){let s=n?e[r].style.transform:"";e[r].style.transform=s+` scaleY(${t})`}},skew(e,t,n,r="deg"){this._applySingle(e,"skew",t,n,r)},rotate(e,t,n,r="deg"){this._applySingle(e,"rotate",t,n,r)},translate(e,t,n,r="px"){this._applySingle(e,"translate",t,n,r)},_applySingle(e,t,n,r,s){const i=Array.isArray(n)?`${t}(${n.join(s+",")+s})`:`${t}(${n+s})`;for(let t=0;t<e.length;t++){let n=r?e[t].style.transform:"";e[t].style.transform=n+" "+i}},_applyMatrix(e,t,n,s,i){if(Array.isArray(t)&&t.length==n)for(let n=0;n<e.length;n++){let r=s?e[n].style.transform:"";e[n].style.transform=r+` matrix3d(${t.join(",")})`}else Object(r.printErr)(`matrix must be an array with length "${n}"`)}};const l=Object(r.idGetter)("__elem__"),a=new Map;class c{constructor(e){this.elements=e?e instanceof NodeList||Array.isArray(e)?e:[e]:[],this._srcLength=this.elements.length,this._ready=!1,this._id=l(),this.query=""}native(){return 1==this.elements.length?this.elements[0]:Array.from(this.elements)}get length(){return this.elements.length}get tag(){return this.elements[0].tagName.toLowerCase()}get isHTMLTools(){return!0}ready(){return new Promise((e,t)=>{const n=this.select("img, link, script, iframe").join(this.elements).elements;n._countReady=0;const r=()=>{n._countReady++,n._countReady==n.length&&e()};n.forEach(e=>{const n=e.tagName.toLowerCase(),s=`Can't load resource "${e.src}"`;let i=!0;if("img"===n){if((i=e.complete)&&!e.width&&!e.height)return void t(s)}else"link"!==n&&"iframe"!==n||(i=!1);i?r():(e.addEventListener("load",r),e.addEventListener("error",t))})})}mutation(e,t,n){if("MutationObserver"in window){n&&this.mutationClear(),this._mutations=[];for(let n=0;n<this.elements.length;n++){const r=this.elements[n],s=new MutationObserver(t=>e(t[0]));s.observe(r,t),this._mutations.push({options:t,observer:s,element:r})}return this}Object(r.printErr)("Your browser not support observ mutation")}mutationStart(){this._mutations.forEach(e=>{const{observer:t,element:n,options:r}=e;t.observe(n,r)})}mutationEnd(){this._mutations.forEach(e=>{e.observer.disconnect()})}mutationClear(){this._mutations.forEach(e=>{e.observer.disconnect()}),this._mutations=null}visible(e=3){const t=this._searchHidden(this.elements[0],e,0);return t?{element:t}:{}}_searchHidden(e,t,n){if(n>=t)return!1;const{parentElement:r,parentNode:s}=e,i=r||s;return!(!i||i===document)&&(this.display(i)?this._searchHidden(i,t,++n):i)}display(e){const t=e||this.elements[0];return"none"!==(t.style.display?t.style.display:getComputedStyle(t).display)}inScreen(e){const t=e||this.elements[0],{top:n,left:r,bottom:s,right:i}=t.getBoundingClientRect(),{clientWidth:o,clientHeight:l}=document.documentElement;return!(s<0||i<0||n>l||r>o)}select(e){if(1==this.elements.length){const t=this.elements[0].querySelectorAll(e),n=new c(t);return n.query=e,n}const t=[];for(let n=0;n<this.elements.length;n++){const r=this.elements[n].querySelectorAll(e),s=t.length;for(let e=0;e<r.length;e++)t[s+e]=r[e]}const n=new c(t);return n.query=e,n}getById(e){const t=new c(document.getElementById(e));return t.query="#"+e,t}before(e){return this._insert(e,"beforebegin"),this}after(e){return this._insert(e,"afterend"),this}append(e){return this._insert(e,"beforeend"),this}appendTo(e){return e.append(this),this}prepend(e){return this._insert(e,"afterbegin"),this}prependTo(e){return e.prepend(this),this}_insert(e,t){if(e.isHTMLTools){if(e._jsonConv)return void this._insertJSON(e,"beforeend");Array.isArray(e.elements)||(e.elements=Array.from(e.elements));let n=0;if(!e.elements[0].parentNode){const[r]=this.elements;for(let n=0;n<e._srcLength;n++)r.insertAdjacentElement(t,e.elements[n]);n++}for(let r=n;r<this.elements.length;r++)for(let n=0;n<e._srcLength;n++){const s=e.elements[n].cloneNode(!0);e.elements.push(s),this.elements[r].insertAdjacentElement(t,s)}}else if(Array.isArray(e))for(let n=0;n<e.length;n++)this._insert(e[n],t)}_insertJSON(e,t){for(let n=0;n<this.elements.length;n++){const r=e._jsonConv.build();e.elements.push(r),this.elements[n].insertAdjacentElement(t,r)}}move(e,t="end",n=0,r=!1){let s;switch(t){case"before":s="beforebegin";break;case"begin":s="afterbegin";break;case"end":s="beforeend";break;case"after":s="afterend"}const i=this.elements.length-1,o=this.elements[r?i-n:n],{elements:l}=e;for(let e=0;e<l.length;e++)o.insertAdjacentElement(s,l[e]);return this}moveTo(e,t,n,r){return e.move(this,t,n,r),this}createFromJSON(e){const t=new i(e),{htl:n,nodes:r}=t;return n.node=r,n._jsonConv=t,n}createJSON(e){const t=e?e.elements:this.elements;return t.length>1?t.map(e=>i.createJSON(e)):i.createJSON(t[0])}tplAppend(e){return!!e.isTemplate&&e.appendTo(this)}addClass(e){for(let t=0;t<this.elements.length;t++)this.elements[t].classList.add(e);return this}removeClass(e){for(let t=0;t<this.elements.length;t++)this.elements[t].classList.remove(e);return this}html(e,t=!0){if(void 0===e)return this.elements[0].innerHTML;for(let n=0;n<this.elements.length;n++)t?this.elements[n].innerHTML=e:this.elements[n].innerHTML+=e;return this}text(e){if(void 0===e)return this.elements[0].innerText;for(let t=0;t<this.elements.length;t++)this.elements[t].innerText=e;return this}value(e){if(void 0===e)return this.elements[0].value;for(let t=0;t<this.elements.length;t++)this.elements[t].value=e;return this}active(e){return e?this.addClass("active"):this.removeClass("active"),this}checked(e){if(void 0===e)return this.elements[0].checked;const t=Boolean(e);for(let e=0;e<this.elements.length;e++)"checked"in this.elements[e]&&(this.elements[e].checked=t);return this}toogle(){for(let e=0;e<this.elements.length;e++)"checked"in this.elements[e]&&(this.elements[e].checked=!this.elements[e].checked);return this}get index(){return this.elements[0].selectedIndex}choose(e){for(let t=0;t<this.elements.length;t++)"selectedIndex"in this.elements[t]&&(this.elements[t].selectedIndex=e);return this}width(e){if(void 0===e)return this.elements[0].offsetWidth;let t=e;"number"==typeof e&&(t+="px");for(let e=0;e<this.elements.length;e++)this.elements[e].style.width=t;return this}height(e){if(void 0===e)return this.elements[0].offsetHeight;let t=e;"number"==typeof e&&(t+="px");for(let e=0;e<this.elements.length;e++)this.elements[e].style.height=t;return this}size(e,t){if(void 0===e&&void 0===t){const{offsetWidth:e,offsetHeight:t}=this.elements[0];return{width:e,height:t}}let n=e;h=t,"number"==typeof e&&(n+="px"),"number"==typeof t&&(h+="px");for(let e=0;e<this.elements.length;e++)this.elements[e].style.width=n,this.elements[e].style.height=h}offsetParent(){const{offsetTop:e,offsetLeft:t}=this.elements[0];return{top:e,left:t}}offsetWindow(){return this.elements[0].getBoundingClientRect()}offsetScroll(){const{scrollTop:e,scrollLeft:t}=this.elements[0];return{top:e,left:t}}offsetPage(){const e=this.elements[0],t=e.getBoundingClientRect(),n=document.documentElement,r=t.top+window.pageYOffset-n.clientTop,s=t.left+window.pageXOffset-n.clientLeft;return{top:Math.round(r),left:Math.round(s),bottom:Math.round(r+e.offsetHeight),right:Math.round(s+e.offsetWidth)}}scroll(){}wrap(e,t){if("string"==typeof e){const t=[],n=document.createElement("div");n.classList.add(e);for(let e=0;e<this.elements.length;e++){const r=this.elements[e],s=n.cloneNode();r.parentNode.insertBefore(s,r),s.appendChild(r),t.push(s)}return new c(t)}if(Array.isArray(e)){let n;if(t){n=this.wrap(e[e.length-1]);for(let t=e.length-2;t>=0;t--)this.wrap(e[t])}else{n=this.wrap(e[0]);for(let t=1;t<e.length;t++)this.wrap(e[t])}return n}}hide(){for(let e=0;e<this.elements.length;e++)this.elements[e].style.display="none";return this}show(e=""){for(let t=0;t<this.elements.length;t++)this.elements[t].style.display=e;return this}parent(){const e=[];for(let t=0;t<this.elements.length;t++){const{parentElement:n,parentNode:r}=this.elements[t],s=n||r;s&&e.push(s)}return new c(e)}transform(e,t){return o.apply(this,e,t),this}matrix2d(e,t){return o.matrix2d(this.elements,actions,t),this}matrix3d(e,t){return o.matrix3d(this.elements,e,t),this}scale(e,t){return o.scale(this.elements,e,t),this}scaleX(e,t){return o.scaleX(this.elements,e,t),this}scaleY(e,t){return o.scaleY(this.elements,e,t),this}skew(e,t,n){return o.skew(this.elements,e,t,n),this}rotate(e,t,n){return o.rotate(this.elements,e,t,n),this}translate(e,t,n){return o.translate(this.elements,e,t,n),this}origin(e,t){return o.origin(this,e,t),this}getAttr(e){const t=this.elements[0];if(!t)return;const{attributes:n,nodeType:r}=t;if(1!==r||!n.length)return;if("string"==typeof e)return t.getAttribute(e);const s={};if(Array.isArray(e))for(let n=0;n<e.length;n++){const e=t.getAttribute(item);e&&(s[item]=e)}else if(!e)for(let e=0;e<t.attributes.length;e++){const{name:n,value:r}=t.attributes[e];s[n]=r}return s}setAttr(e,t){if("string"==typeof e&&void 0!==t)for(let n=0;n<this.elements.length;n++)this.elements[n].setAttribute(e,t);else if("object"==typeof e)for(let t=0;t<this.elements.length;t++)for(const n in e)this.elements[t].setAttribute(n,e[n]);return this}unsetAttr(e){if("string"==typeof e)for(let t=0;t<this.elements.length;t++)this.elements[t].removeAttribute(e);else if(Array.isArray(e))for(let t=0;t<this.elements.length;t++)for(let n=0;n<e.length;n++)this.elements[t].removeAttribute(e[n]);else if(void 0===e){const e=this.getAttr();if(!e)return this;for(let t=0;t<this.elements.length;t++)for(let n in e)this.elements[t].removeAttribute(n)}return this}style(e,t){if("string"!=typeof e)return this;if(void 0===t)return this.elements[0].style[e];for(let n=0;n<this.elements.length;n++)this.elements[n].style[e]=t;return this}styles(){let e,t="";1==arguments.length?e=arguments[0]:(e=arguments[1],t=arguments[0]),t&&(t+="-");for(let n=0;n<this.elements.length;n++)for(const r in e)this.elements[n].style[t+r]=e[r];return this}addEvent(e,t){a.has(this._id)||a.set(this._id,new Map);const n=a.get(this._id);if("string"==typeof e&&"function"==typeof t)this._eventAttach(n,e,t);else if("object"==typeof e)for(const t in e)this._eventAttach(n,t,e[t]);return this}fireEvent(e){const t=new Event(e);for(let e=0;e<this.elements.length;e++)this.elements[e].dispatchEvent(t);return this}removeEvent(e){if(!a.has(this._id))return this;const t=a.get(this._id);if(!e){for(const[e]of t)this.unsetAttr("on"+e);return t.clear(),this}return t.delete(e),this.unsetAttr("on"+e),this}_eventAttach(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,new s.a(n)),this.setAttr("on"+t,`$event.fire('${this._id}','${t}',event)`)}each(e){for(let t=0;t<this.elements.length;t++)e(this.elements[t],t,this);return this}clone(e){const t=[];for(let n=0;n<this.elements.length;n++)t.push(this.elements[n].cloneNode(e));return new c(t)}join(e){let t;if(this.elements=Array.from(this.elements),e.isHTMLTools)t=e.elements;else if(e instanceof NodeList||Array.isArray(e))t=e;else{if(!(e instanceof Element))return Object(r.printErr)(`Can't attach element ${e}`),this;t=[e]}for(let e=0;e<t.length;e++)this.elements.push(t[e]);return this}clear(){for(let e=0;e<this.elements.length;e++)this.elements[e].innerHTML="";return this}remove(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e],{parentNode:n}=t;n&&n.removeChild(t)}return Array.isArray(this.elements)||(this.elements=Array.from(this.elements)),this.elements.splice(this._srcLength),this}delete(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e],{parentNode:n}=t;n&&n.removeChild(t)}return this.elements=[],this._srcLength=0,this}}class u{constructor(){this.element=this._createElement()}get isStyleSheet(){return!0}_createElement(){if(document.createStyleSheet)return document.createStyleSheet();{const e=document.getElementsByTagName("head")[0],t=document.createElement("style");return e.appendChild(t),document.styleSheets[document.styleSheets.length-1]}}_getLastIndex(){return this.element.cssRules.length}add(){if(arguments.length>1){const[e,t]=arguments;return this._add(e,t)}if(Array.isArray(arguments[0])){const e=[];return arguments[0].forEach(t=>{const{rule:n}=t;e.push(this._add(n,style))}),e}}_add(e,t){if("string"!=typeof e)return void Object(r.printErr)(`rule "${e}" argument must be a string`);if("object"!=typeof t)return void Object(r.printErr)(`styles "${t}" argument must be an object`);const n=u.serialize(e,t),s=this._getLastIndex();return this.element.insertRule(n,s),s}keyFrames(e,t){if(!Array.isArray(t)||t.length<2)return void Object(r.printErr)("keyframes must be an array with more than 1 elements");const n=this._getLastIndex(),s=t.length-1,i="@keyframes "+e;let o="";return t.forEach((e,t)=>{const{offset:n=t/s}=e;o+=u.serialize(100*n+"%",e)}),this.element.insertRule(`${i} {${o}}`,n),n}media(e,t){if("object"!=typeof e)return void Object(r.printErr)("media request must be an object");const n=this._buildMediaRule(e),s=this._getLastIndex();this.element.insertRule(`${n} {}`,s);const i=new f(this.element,s);return Array.isArray(t)&&t.forEach(e=>{const{rule:t}=e;i.add(t,e)}),i}_buildMediaRule(e){const{only:t}=e;let n="@media",s=!0;t&&(n+=" only",e.only=null);for(let t in e){const i=e[t];if(!i)continue;const o=Object(r.camelCaseToDash)(t);n+=s?" ":" and ",n+="boolean"==typeof i?o:"number"==typeof i?`(${o}:${i}px)`:`(${o}:${i})`,s=!1}return n}animation(e){return new p(this,e)}remove(e){e.isSpecial?(e.clear(),this.elements.deleteRule(e.index)):this.elements.deleteRule(e)}static serialize(e,t){let n=e+"{";for(let e in t){if("rule"===e)continue;let s=t[e];"transform"===e&&"object"==typeof s&&(s=o.serialize(s)),n+=`${Object(r.camelCaseToDash)(e)}:${s};`}return n+"}"}}class f{constructor(e,t){this._media=e.cssRules[t],this._rules=this._media.cssRules,this.index=t}get isSpecial(){return!0}get isMedia(){return!0}add(e,t){const n=this._rules.length,r=u.serialize(e,t);return this._media.insertRule(r,n),n}remove(e){this._media.deleteRule(e)}clear(){for(let e=0;e<this._rules.length;e++)this._media.deleteRule(e)}}const d=Object(r.idGetter)("__kf__"),m=Object(r.idGetter)("__anim__");class p{constructor(e,t){this._parent=e,this._offsetTime=0,this._prevDuration=0,this._strRule="",this._keyFrames=new Map,this.className=t||m(),this.index=null}get isSpecial(){return!0}get isAnimation(){return!0}init(){return this.index=this._parent.add("."+this.className,{animation:this._strRule}),this}add(e,t){return this._attach(!0,e,t),this._prevThen=!0,this}and(e,t){return this._attach(!1,e,t),this._prevThen=!1,this}_attach(e,t,n={}){const{duration:r=1e3,easing:s=null,steps:i=null,stepType:o="end",fillMode:l="forwards",delay:a=0}=n,c=e?this._offsetTime+a:this._offsetTime-this._prevDuration,u=d(),h=this._parent.keyFrames(u,t);this._keyFrames.set(u,h),this._strRule+=(this._strRule?",":"")+u,this._strRule+=` ${r}ms`,this._strRule+=` ${c}ms`,i&&(this._strRule+=` steps(${i}, ${o})`),s&&(this._strRule+=` ${s}`),l&&(this._strRule+=` ${l}`),e&&(this._offsetTime+=r,this._prevDuration=r)}clear(){this._keyFrames.forEach(e=>this._parent.remove(e)),this._keyFrames.clear()}}const y=c.prototype,g=new c(document),b={fire:(e,t,n)=>{if(!a.has(e))return void Object(r.printErr)(`Can't dispatch event on element with id "${e}"`);const s=a.get(e);s.has(t)&&s.get(t).call(n)}};if(g.extend=function(e,t){return y[e]=t,this},g.ready=new Promise(e=>{g._ready?e():document.addEventListener("DOMContentLoaded",e)}),g.script=function(e){return new Promise((t,n)=>{const r=document.createElement("script");r.src=e,r.onload=(()=>t(r)),r.onerror=(()=>n(`can't load the script "${e}"`)),document.body.appendChild(r)})},g.create=function(e,t,n){const r=new c(document.createElement(e));return"string"==typeof t?r.addClass(t):"object"==typeof t&&r.setAttr(t),n&&r.style(n),r},g.convert=function(e){return 1===e.nodeType||9===e.nodeType?new c(e):"string"==typeof e?this.select(e):!!e.isHTMLTools&&e},g.parseXML=function(e){let t,n="";return void 0!==window.DOMParser?t=(e=>(new window.DOMParser).parseFromString(e,"text/xml")):void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?t=(e=>{const t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}):n="parseXML not supported by this browser!",n?Object(r.printErr)(n):t(e)},g.createStyleSheet=function(){return new u},g._body=new c,!window.$event){const e={configurable:!1,enumerable:!1,writable:!1};Object.defineProperty(window,"$event",{...e,value:b})}Object.defineProperty(g,"body",{configurable:!1,get:function(){return document.body?this._body.length||this._body.join(document.body):Object(r.printErr)("body element is currently unavailable!"),this._body}}),document.addEventListener("DOMContentLoaded",()=>g._ready=!0);t.a=g}]);